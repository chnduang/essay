## å®ç”¨çš„JavaScript ä»£ç ç‰‡æ®µï¼Œä½ åƒä¸‡è¦æ”¶è—å¥½ï¼ˆä¸Šï¼‰

# **1ã€all**

å¦‚æœè°“è¯å‡½æ•°å¯¹é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ è¿”å› trueï¼Œåˆ™æ­¤ä»£ç æ®µè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ å¦‚æœä½ æƒ³ä½¿ç”¨å¸ƒå°”å€¼ä½œä¸ºé»˜è®¤å€¼ï¼Œä½ å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•° fnã€‚


```
const all = (arr, fn = Boolean) => arr.every(fn);
all([4, 2, 3], x => x > 1); // trueall([1, 2, 3]); // true
```

# **2ã€ allEqual**

æ­¤ä»£ç æ®µæ£€æŸ¥æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚


```
const allEqual = arr => arr.every(val => val === arr[0]);
allEqual([1, 2, 3, 4, 5, 6]); // falseallEqual([1, 1, 1, 1]); // true
```

# **3ã€approximatelyEqual**

æ­¤ä»£ç æ®µæ£€æŸ¥ä¸¤ä¸ªæ•°å­—æ˜¯å¦å½¼æ­¤è¿‘ä¼¼ç›¸ç­‰ï¼Œå·®å¼‚å¾ˆå°ã€‚

```
const approximatelyEqual = (v1, v2, epsilon = 0.001) => Math.abs(v1  v2) < epsilon;
approximatelyEqual(Math.PI / 2.0, 1.5708); // true
```

# **4ã€arrayToCSV**

æ­¤ä»£ç æ®µå°†æ²¡æœ‰é€—å·æˆ–åŒå¼•å·çš„å…ƒç´ è½¬æ¢ä¸ºå…·æœ‰é€—å·åˆ†éš”å€¼çš„å­—ç¬¦ä¸²ã€‚

```
const arrayToCSV = (arr, delimiter = ',') =>  arr.map(v => v.map(x => `"${x}"`).join(delimiter)).join('\n');
arrayToCSV([['a', 'b'], ['c', 'd']]); // '"a","b"\n"c","d"'arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '"a";"b"\n"c";"d"'
```

# **5ã€arrayToHtmlList**

æ­¤ä»£ç æ®µå°†æ•°ç»„å…ƒç´ è½¬æ¢ä¸º`<li>`æ ‡ç­¾ï¼Œå¹¶å°†å®ƒä»¬é™„åŠ åˆ°ç»™å®š ID çš„åˆ—è¡¨ä¸­ã€‚

```
const arrayToHtmlList = (arr, listID) =>  (el => (    (el = document.querySelector('#' + listID)),    (el.innerHTML += arr.map(item => `<li>${item}</li>`).join(''))  ))();
arrayToHtmlList(['item 1', 'item 2'], 'myListID');
```

# **6ã€attempt**

æ­¤ä»£ç æ®µæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»“æœæˆ–æ•è·çš„é”™è¯¯å¯¹è±¡ã€‚

```
const attempt = (fn, ...args) => {  try {    return fn(...args);  } catch (e) {    return e instanceof Error ? e : new Error(e);  }};var elements = attempt(function(selector) {  return document.querySelectorAll(selector);}, '>_>');if (elements instanceof Error) elements = []; // elements = []
```

# **7ã€average**

æ­¤ä»£ç æ®µè¿”å›ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°å€¼çš„å¹³å‡å€¼ã€‚

```
const average = (...nums) => nums.reduce((acc, val) => acc + val, 0) / nums.length;average(...[1, 2, 3]); // 2average(1, 2, 3); // 2
```

# **8ã€averageBy**

æ­¤ä»£ç æ®µåœ¨æœ€åˆä½¿ç”¨ç»™å®šå‡½æ•°å°†æ¯ä¸ªå…ƒç´ æ˜ å°„åˆ°å€¼åè¿”å›æ•°ç»„çš„å¹³å‡å€¼ã€‚

```
const averageBy = (arr, fn) =>  arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val) => acc + val, 0) /  arr.length;
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o => o.n); // 5averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5
```

# **9ã€bifurcate**

æ­¤ä»£ç æ®µå°†å€¼åˆ†æˆä¸¤ç»„ï¼Œç„¶åå°†è¿‡æ»¤å™¨çš„çœŸå®å…ƒç´ æ”¾å…¥ç¬¬ä¸€ç»„ï¼Œå¦åˆ™æ”¾å…¥ç¬¬äºŒç»„ã€‚

ä½ å¯ä»¥ä½¿ç”¨ Array.prototype.reduce() å’Œ Array.prototype.push() æ ¹æ®è¿‡æ»¤å™¨å°†å…ƒç´ æ·»åŠ åˆ°ç»„ä¸­ã€‚


```
const bifurcate = (arr, filter) =>  arr.reduce((acc, val, i) => (acc[filter[i] ? 0 : 1].push(val), acc), [[], []]);bifurcate(['beep', 'boop', 'foo', 'bar'], [true, true, false, true]); // [ ['beep', 'boop', 'bar'], ['foo'] ]
```

# **10ã€bifurcateBy**

æ­¤ä»£ç æ®µæ ¹æ®è°“è¯å‡½æ•°å°†å€¼åˆ†ä¸ºä¸¤ç»„ã€‚ å¦‚æœè°“è¯å‡½æ•°è¿”å›ä¸€ä¸ªçœŸå€¼ï¼Œåˆ™è¯¥å…ƒç´ å°†è¢«æ”¾ç½®åœ¨ç¬¬ä¸€ç»„ä¸­ã€‚ å¦åˆ™ï¼Œå®ƒå°†è¢«æ”¾ç½®åœ¨ç¬¬äºŒç»„ä¸­ã€‚

ä½ å¯ä»¥ä½¿ç”¨ Array.prototype.reduce() å’Œ Array.prototype.push() æ ¹æ® fn ä¸ºæ¯ä¸ªå…ƒç´ è¿”å›çš„å€¼å°†å…ƒç´ æ·»åŠ åˆ°ç»„ä¸­ã€‚

```
const bifurcateBy = (arr, fn) =>  arr.reduce((acc, val, i) => (acc[fn(val, i) ? 0 : 1].push(val), acc), [[], []]);
bifurcateBy(['beep', 'boop', 'foo', 'bar'], x => x[0] === 'b'); // [ ['beep', 'boop', 'bar'], ['foo'] ]
```

# **11ã€bottomVisible**

æ­¤ä»£ç æ®µæ£€æŸ¥é¡µé¢åº•éƒ¨æ˜¯å¦å¯è§ã€‚

```
const bottomVisible = () =>  document.documentElement.clientHeight + window.scrollY >=  (document.documentElement.scrollHeight || document.documentElement.clientHeight);
bottomVisible(); // true
```

# **12ã€byteSize**

æ­¤ä»£ç æ®µä»¥å­—èŠ‚ä¸ºå•ä½è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚


```
const byteSize = str => new Blob([str]).size;
byteSize('ğŸ˜€'); // 4byteSize('Hello World'); // 11
```

# **13ã€capitalize**

æ­¤ä»£ç æ®µå°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ã€‚

```
const capitalize = ([first, ...rest]) =>  first.toUpperCase() + rest.join('');
capitalize('fooBar'); // 'FooBar'capitalize('fooBar', true); // 'FooBar'
```

# **14ã€capitalizeEveryWord**

æ­¤ä»£ç æ®µå°†ç»™å®šå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ã€‚

 

 

```
const capitalizeEveryWord = str => str.replace(/\b[az]/g, char => char.toUpperCase());
capitalizeEveryWord('hello world!'); // 'Hello World!'
```

# **15ã€castArray**

æ­¤ä»£ç æ®µå°†éæ•°ç»„å€¼è½¬æ¢ä¸ºæ•°ç»„ã€‚

 

 

```
const castArray = val => (Array.isArray(val) ? val : [val]);castArray('foo'); // ['foo']castArray([1]); // [1]
```

# **16ã€compact**

æ­¤ä»£ç æ®µä»æ•°ç»„ä¸­åˆ é™¤é”™è¯¯å€¼ã€‚

 

 


```
const compact = arr => arr.filter(Boolean);
compact([0, 1, false, 2, '', 3, 'a', 'e' * 23, NaN, 's', 34]); // [ 1, 2, 3, 'a', 's', 34 ]
```

# **17ã€countOccurrences**

æ­¤ä»£ç æ®µè®¡ç®—æ•°ç»„ä¸­æŸä¸ªå€¼çš„å‡ºç°æ¬¡æ•°ã€‚

 


```
const countOccurrences = (arr, val) => arr.reduce((a, v) => (v === val ? a + 1 : a), 0);countOccurrences([1, 1, 2, 1, 2, 3], 1); // 3
```

# **18ã€Create Directory**

æ­¤ä»£ç æ®µç”¨äºexistsSync()æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼ŒmkdirSync()å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºå®ƒã€‚

 

 


```
const fs = require('fs');const createDirIfNotExists = dir => (!fs.existsSync(dir) ? fs.mkdirSync(dir) : undefined);createDirIfNotExists('test'); // creates the directory 'test', if it doesn't exist
```

# **19ã€currentURL**

æ­¤ä»£ç æ®µè¿”å›å½“å‰URLã€‚

 

 

```
const currentURL = () => window.location.href;
currentURL(); // 'https://medium.com/@fatosmorina'
```

# **20ã€dayOfYear**

æ­¤ä»£ç æ®µä»Date å¯¹è±¡ä¸­è·å–ä¸€å¹´ä¸­çš„å“ªä¸€å¤©ã€‚

 

 


```
const dayOfYear = date =>  Math.floor((date  new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
dayOfYear(new Date()); // 272
```

# **21ã€decapitalize**

æ­¤ä»£ç æ®µå°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯è½¬æ¢ä¸ºå°å†™ã€‚

 

 

 

```
const decapitalize = ([first, ...rest]) =>  first.toLowerCase() + rest.join('')
decapitalize('FooBar'); // 'fooBar'decapitalize('FooBar'); // 'fooBar'
```

# **22ã€deepFlatten**

æ­¤ä»£ç æ®µé€’å½’åœ°å±•å¹³æ•°ç»„ã€‚

 

 

```
const deepFlatten = arr => [].concat(...arr.map(v => (Array.isArray(v) ? deepFlatten(v) : v)));
deepFlatten([1, [2], [[3], 4], 5]); // [1,2,3,4,5]
```

# **23ã€defaults**

æ­¤ä»£ç æ®µä¸ºå¯¹è±¡ä¸­æœªå®šä¹‰çš„æ‰€æœ‰å±æ€§åˆ†é…é»˜è®¤å€¼ã€‚

 

 

```
const defaults = (obj, ...defs) => Object.assign({}, obj, ...defs.reverse(), obj);
defaults({ a: 1 }, { b: 2 }, { b: 6 }, { a: 3 }); // { a: 1, b: 2 }
```

# **24ã€defer**

æ­¤ä»£ç æ®µä¼šå»¶è¿Ÿå‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ°æ¸…é™¤å½“å‰è°ƒç”¨å †æ ˆã€‚

 

 

```
const defer = (fn, ...args) => setTimeout(fn, 1, ...args);
defer(console.log, 'a'), console.log('b'); // logs 'b' then 'a'
```

# **25ã€degreesToRads**

æ­¤ä»£ç ç‰‡æ®µå¯ç”¨äºå°†å€¼ä»åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦ã€‚

 

 

```
const degreesToRads = deg => (deg * Math.PI) / 180.0;
degreesToRads(90.0); // ~1.5708
```

# **26ã€difference**

æ­¤ä»£ç æ®µæŸ¥æ‰¾ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ã€‚

 

 

 


```
const difference = (a, b) => {  const s = new Set(b);  return a.filter(x => !s.has(x));};
difference([1, 2, 3], [1, 2, 4]); // [3]
```

# **27ã€differenceBy**

åœ¨å°†ç»™å®šå‡½æ•°åº”ç”¨äºä¸¤ä¸ªåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ ä¹‹åï¼Œæ­¤æ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ã€‚

 

 

 

 

```
const differenceBy = (a, b, fn) => {  const s = new Set(b.map(fn));  return a.filter(x => !s.has(fn(x)));};
differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [1.2]differenceBy([{ x: 2 }, { x: 1 }], [{ x: 1 }], v => v.x); // [ { x: 2 } ]
```

# **28ã€differenceWith**

æ­¤ä»£ç æ®µåˆ é™¤äº†æ¯”è¾ƒå™¨å‡½æ•°è¿”å›çš„å€¼falseã€‚

 

 


```
const differenceWith = (arr, val, comp) => arr.filter(a => val.findIndex(b => comp(a, b)) === 1);
differenceWith([1, 1.2, 1.5, 3, 0], [1.9, 3, 0], (a, b) => Math.round(a) === Math.round(b)); // [1, 1.2]
```

# **29ã€digitize**

æ­¤ä»£ç æ®µè·å–ä¸€ä¸ªæ•°å­—ä½œä¸ºè¾“å…¥å¹¶è¿”å›å…¶æ•°å­—æ•°ç»„ã€‚

 

 

```
const digitize = n => [...`${n}`].map(i => parseInt(i));
digitize(431); // [4, 3, 1]
```

# **30ã€distance**

æ­¤ä»£ç æ®µé€šè¿‡è®¡ç®—è·ç¦»è¿”å›ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚

 

 

```
const distance = (x0, y0, x1, y1) => Math.hypot(x1  x0, y1  y0);
distance(1, 1, 2, 3); // 2.23606797749979
```

# **31ã€drop Elements**

æ­¤ä»£ç æ®µè¿”å›ä¸€ä¸ªä»å·¦ä¾§åˆ é™¤äº† n ä¸ªå…ƒç´ çš„æ–°æ•°ç»„ã€‚

 

 

 

```
const drop = (arr, n = 1) => arr.slice(n);
drop([1, 2, 3]); // [2,3]drop([1, 2, 3], 2); // [3]drop([1, 2, 3], 42); // []
```

# **32ã€dropRight**

æ­¤ä»£ç æ®µè¿”å›ä¸€ä¸ªä»å³ä¾§åˆ é™¤äº† n ä¸ªå…ƒç´ çš„æ–°æ•°ç»„ã€‚

 

 

 

```
const dropRight = (arr, n = 1) => arr.slice(0, n);
dropRight([1, 2, 3]); // [1,2]dropRight([1, 2, 3], 2); // [1]dropRight([1, 2, 3], 42); // []
```

# **33ã€dropRightWhile**

æ­¤ä»£ç æ®µä»æ•°ç»„çš„å³ä¾§åˆ é™¤å…ƒç´ ï¼Œç›´åˆ°ä¼ é€’çš„å‡½æ•°è¿”å› trueã€‚

 

 

 


```
const dropRightWhile = (arr, func) => {  while (arr.length > 0 && !func(arr[arr.length  1])) arr = arr.slice(0, 1);  return arr;};
dropRightWhile([1, 2, 3, 4], n => n < 3); // [1, 2]
```

# **34ã€dropWhile**

æ­¤ä»£ç æ®µä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ ï¼Œç›´åˆ°ä¼ é€’çš„å‡½æ•°è¿”å›trueã€‚

 

 

 


```
const dropWhile = (arr, func) => {  while (arr.length > 0 && !func(arr[0])) arr = arr.slice(1);  return arr;};
dropWhile([1, 2, 3, 4], n => n >= 3); // [3,4]
```

# **35ã€elementContains**

æ­¤ä»£ç æ®µæ£€æŸ¥çˆ¶å…ƒç´ æ˜¯å¦åŒ…å«å­å…ƒç´ ã€‚

 

 


```
const elementContains = (parent, child) => parent !== child && parent.contains(child);
elementContains(document.querySelector('head'), document.querySelector('title')); // trueelementContains(document.querySelector('body'), document.querySelector('body')); // false
```

# **36ã€è¿‡æ»¤é‡å¤å…ƒç´ **

æ­¤ä»£ç æ®µåˆ é™¤æ•°ç»„ä¸­çš„é‡å¤å€¼ã€‚

 


```
const filterNonUnique = arr => [ â€¦new Set(arr)];filterNonUnique([1, 2, 2, 3, 4, 4, 5]); // [1, 2, 3, 4, 5]
```

# **37ã€findKey**

æ­¤ä»£ç æ®µè¿”å›æ»¡è¶³ç»™å®šå‡½æ•°çš„ç¬¬ä¸€ä¸ªé”®å€¼ã€‚

 

 

 

 

 


```
const findKey = (obj, fn) => Object.keys(obj).find(key => fn(obj[key], key, obj));
findKey(  {    barney: { age: 36, active: true },    fred: { age: 40, active: false },    pebbles: { age: 1, active: true }  },  o => o['active']); // 'barney'
```

# **38ã€findLast**

æ­¤ä»£ç æ®µè¿”å›ç»™å®šå‡½æ•°è¿”å›çœŸå€¼çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚

 

 

```
const findLast = (arr, fn) => arr.filter(fn).pop();
findLast([1, 2, 3, 4], n => n % 2 === 1); // 3
```

# **39ã€flatten**

æ­¤ä»£ç æ®µä½¿ç”¨é€’å½’å°†æ•°ç»„å±•å¹³åˆ°æŒ‡å®šçš„æ·±åº¦ã€‚

 

 

 

```
const flatten = (arr, depth = 1) =>  arr.reduce((a, v) => a.concat(depth > 1 && Array.isArray(v) ? flatten(v, depth  1) : v), []);
flatten([1, [2], 3, 4]); // [1, 2, 3, 4]flatten([1, [2, [3, [4, 5], 6], 7], 8], 2); // [1, 2, 3, [4, 5], 6, 7, 8]
```

# **40ã€forEachRight**

æ­¤ä»£ç æ®µä»æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¸ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚

 

 

 

 

```
const forEachRight = (arr, callback) =>  arr    .slice(0)    .reverse()    .forEach(callback);
forEachRight([1, 2, 3, 4], val => console.log(val)); // '4', '3', '2', '1'
```

# **41ã€forOwn**

æ­¤ä»£ç æ®µè¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå±æ€§ï¼Œå¹¶åˆ†åˆ«ä¸ºæ¯ä¸ªå±æ€§è¿­ä»£ä¸€ä¸ªå›è°ƒã€‚

 


```
const forOwn = (obj, fn) => Object.keys(obj).forEach(key => fn(obj[key], key, obj));forOwn({ foo: 'bar', a: 1 }, v => console.log(v)); // 'bar', 1
```

# **42ã€functionName**

æ­¤ä»£ç æ®µå°†å‡½æ•°çš„åç§°æ‰“å°åˆ°æ§åˆ¶å°ä¸­ã€‚

 


```
const functionName = fn => (console.debug(fn.name), fn);functionName(Math.max); // max (logged in debug channel of console)
```

# **43ã€ä»æ—¥æœŸè·å–æ—¶é—´**

æ­¤ä»£ç æ®µå¯ç”¨äºä»¥Date å­—ç¬¦ä¸²å½¢å¼ä»å¯¹è±¡ä¸­è·å–æ—¶é—´ã€‚

 

 

```
const getColonTimeFromDate = date => date.toTimeString().slice(0, 8);
getColonTimeFromDate(new Date()); // "08:38:00"
```

# **44ã€è·å–æ—¥æœŸä¹‹é—´çš„å¤©æ•°**

æ­¤ä»£ç æ®µå¯ç”¨äºæŸ¥æ‰¾ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®å¼‚ã€‚

 

 


```
const getDaysDiffBetweenDates = (dateInitial, dateFinal) =>  (dateFinal  dateInitial) / (1000 * 3600 * 24);
getDaysDiffBetweenDates(new Date('20190113'), new Date('20190115')); // 2
```

# **45ã€getStyle**

æ­¤ä»£ç æ®µå¯ç”¨äºè·å–ç‰¹å®šå…ƒç´ çš„ CSS è§„åˆ™å€¼ã€‚

 

 

```
const getStyle = (el, ruleName) => getComputedStyle(el)[ruleName];
getStyle(document.querySelector('p'), 'fontsize'); // '16px'
```