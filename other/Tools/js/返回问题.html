<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>移动端H5中返回的问题 | duangdong随笔</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端相关知识归纳总结">
    <meta name="keywords" content="qd-blog,js,vuepress,leetcode,react,react进阶,css,js进阶,react性能优化,js设计模式">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.19fb38d9.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/100.98bfa33c.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/101.b289a7e4.js"><link rel="prefetch" href="/assets/js/102.4408c218.js"><link rel="prefetch" href="/assets/js/103.add71c00.js"><link rel="prefetch" href="/assets/js/104.33a74898.js"><link rel="prefetch" href="/assets/js/105.8cac64cc.js"><link rel="prefetch" href="/assets/js/106.7d9b6e7b.js"><link rel="prefetch" href="/assets/js/107.8d61841f.js"><link rel="prefetch" href="/assets/js/108.64c7dc9f.js"><link rel="prefetch" href="/assets/js/109.af0760c5.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.a9288e96.js"><link rel="prefetch" href="/assets/js/111.56c937b2.js"><link rel="prefetch" href="/assets/js/112.1e29bc9a.js"><link rel="prefetch" href="/assets/js/113.a862c823.js"><link rel="prefetch" href="/assets/js/114.680f006b.js"><link rel="prefetch" href="/assets/js/115.ecf64f2d.js"><link rel="prefetch" href="/assets/js/116.3f45f4ac.js"><link rel="prefetch" href="/assets/js/117.03900a62.js"><link rel="prefetch" href="/assets/js/118.2ce2e904.js"><link rel="prefetch" href="/assets/js/119.3caae632.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.32655377.js"><link rel="prefetch" href="/assets/js/121.a47c08a1.js"><link rel="prefetch" href="/assets/js/122.308c088c.js"><link rel="prefetch" href="/assets/js/123.76f9ad80.js"><link rel="prefetch" href="/assets/js/124.376011d5.js"><link rel="prefetch" href="/assets/js/125.5e978587.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.47d58de3.js"><link rel="prefetch" href="/assets/js/23.53b640d9.js"><link rel="prefetch" href="/assets/js/24.d5c3b1a8.js"><link rel="prefetch" href="/assets/js/25.a2d5cd2a.js"><link rel="prefetch" href="/assets/js/26.c382af40.js"><link rel="prefetch" href="/assets/js/27.7a610065.js"><link rel="prefetch" href="/assets/js/28.8f34c662.js"><link rel="prefetch" href="/assets/js/29.cb00e0aa.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.52209dfe.js"><link rel="prefetch" href="/assets/js/31.99c833cd.js"><link rel="prefetch" href="/assets/js/32.e558e539.js"><link rel="prefetch" href="/assets/js/33.b8982b41.js"><link rel="prefetch" href="/assets/js/34.b67ab4c0.js"><link rel="prefetch" href="/assets/js/35.f11112a1.js"><link rel="prefetch" href="/assets/js/36.599f5ecb.js"><link rel="prefetch" href="/assets/js/37.a57f225d.js"><link rel="prefetch" href="/assets/js/38.b2c99147.js"><link rel="prefetch" href="/assets/js/39.d9190dcf.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.ed283c99.js"><link rel="prefetch" href="/assets/js/41.8c50c152.js"><link rel="prefetch" href="/assets/js/42.066b9190.js"><link rel="prefetch" href="/assets/js/43.62de7c6a.js"><link rel="prefetch" href="/assets/js/44.12b279ed.js"><link rel="prefetch" href="/assets/js/45.7b57db8a.js"><link rel="prefetch" href="/assets/js/46.7db0ade0.js"><link rel="prefetch" href="/assets/js/47.788b73fb.js"><link rel="prefetch" href="/assets/js/48.3c23d2bc.js"><link rel="prefetch" href="/assets/js/49.b42e40fe.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.83632853.js"><link rel="prefetch" href="/assets/js/51.5f9843fd.js"><link rel="prefetch" href="/assets/js/52.8e9c42b5.js"><link rel="prefetch" href="/assets/js/53.f4ff5b3c.js"><link rel="prefetch" href="/assets/js/54.9f6cad6f.js"><link rel="prefetch" href="/assets/js/55.166a16c8.js"><link rel="prefetch" href="/assets/js/56.427340ae.js"><link rel="prefetch" href="/assets/js/57.30717b37.js"><link rel="prefetch" href="/assets/js/58.8d96e195.js"><link rel="prefetch" href="/assets/js/59.644d91b7.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.06204820.js"><link rel="prefetch" href="/assets/js/61.39bd88b2.js"><link rel="prefetch" href="/assets/js/62.9c921070.js"><link rel="prefetch" href="/assets/js/63.62cf4cbc.js"><link rel="prefetch" href="/assets/js/64.edaeae65.js"><link rel="prefetch" href="/assets/js/65.1076e1dd.js"><link rel="prefetch" href="/assets/js/66.062ec561.js"><link rel="prefetch" href="/assets/js/67.281a7d23.js"><link rel="prefetch" href="/assets/js/68.44ab9152.js"><link rel="prefetch" href="/assets/js/69.2833c9ff.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.1906f6a7.js"><link rel="prefetch" href="/assets/js/71.67d26af9.js"><link rel="prefetch" href="/assets/js/72.5a9d6eeb.js"><link rel="prefetch" href="/assets/js/73.860f4c64.js"><link rel="prefetch" href="/assets/js/74.40240839.js"><link rel="prefetch" href="/assets/js/75.7dad641e.js"><link rel="prefetch" href="/assets/js/76.519f5c94.js"><link rel="prefetch" href="/assets/js/77.bc48791d.js"><link rel="prefetch" href="/assets/js/78.7c3c6c6d.js"><link rel="prefetch" href="/assets/js/79.3e07757e.js"><link rel="prefetch" href="/assets/js/80.ec60bccd.js"><link rel="prefetch" href="/assets/js/81.533f5f24.js"><link rel="prefetch" href="/assets/js/82.97176153.js"><link rel="prefetch" href="/assets/js/83.ce80c85f.js"><link rel="prefetch" href="/assets/js/84.ab8a3f53.js"><link rel="prefetch" href="/assets/js/85.9e211cea.js"><link rel="prefetch" href="/assets/js/86.c0e94065.js"><link rel="prefetch" href="/assets/js/87.5cd05974.js"><link rel="prefetch" href="/assets/js/88.6d2055c3.js"><link rel="prefetch" href="/assets/js/89.52e5c9ad.js"><link rel="prefetch" href="/assets/js/90.0f16475f.js"><link rel="prefetch" href="/assets/js/91.6be93131.js"><link rel="prefetch" href="/assets/js/92.f1a854a8.js"><link rel="prefetch" href="/assets/js/93.cda09443.js"><link rel="prefetch" href="/assets/js/94.7dbb29c1.js"><link rel="prefetch" href="/assets/js/95.13937ab0.js"><link rel="prefetch" href="/assets/js/96.785fbd27.js"><link rel="prefetch" href="/assets/js/97.e8e90acc.js"><link rel="prefetch" href="/assets/js/98.01539f93.js"><link rel="prefetch" href="/assets/js/99.6271cd14.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong随笔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/other/" aria-current="page" class="sidebar-link">js</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Request</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Tools</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/other/Tools/Mobx.html" class="sidebar-link">Mobx</a></li><li><a href="/other/Tools/cryptojs.html" class="sidebar-link">工具函数</a></li><li><a href="/other/Tools/github-speed.html" class="sidebar-link">修改本地host文件加速访问github</a></li><li><a href="/other/Tools/hexo-github-ci.html" class="sidebar-link">Node.js</a></li><li><a href="/other/Tools/hexo.html" class="sidebar-link">Hexo</a></li><li><a href="/other/Tools/jest.html" class="sidebar-link">/other/Tools/jest.html</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/other/Tools/js/xml获取节点值.html" class="sidebar-link">JS处理接口返回XML格式数据</a></li><li><a href="/other/Tools/js/关于日期和字符串相互转化.html" class="sidebar-link">JS中常用日期使用方法总结</a></li><li><a href="/other/Tools/js/数组基本操作.html" class="sidebar-link">js清空数组的方法</a></li><li><a href="/other/Tools/js/返回问题.html" class="active sidebar-link">移动端H5中返回的问题</a></li></ul></section></li><li><a href="/other/Tools/js操作.html" class="sidebar-link">待补充:</a></li><li><a href="/other/Tools/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/other/Tools/单元测试.html" class="sidebar-link">单元测试</a></li><li><a href="/other/Tools/空格转化.html" class="sidebar-link">/other/Tools/空格转化.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>questions</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="移动端h5中返回的问题"><a href="#移动端h5中返回的问题" class="header-anchor">#</a> 移动端H5中返回的问题</h2> <h4 id="在h5中使用window-history-go-1-不能生效"><a href="#在h5中使用window-history-go-1-不能生效" class="header-anchor">#</a> 在H5中使用window.history.go(-1);不能生效</h4> <blockquote><p>如果app中内置h5的跳转页面，当在其中使用window.history.go(-1)时，并不能返回</p></blockquote> <ul><li><p>可以使用解决</p> <div class="language-js extra-class"><pre class="language-js"><code>location<span class="token punctuation">.</span>href <span class="token operator">=</span> document<span class="token punctuation">.</span>referrer<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="关于document-referrer"><a href="#关于document-referrer" class="header-anchor">#</a> 关于document.referrer</h4> <blockquote><p>获取前一页面的URL地址的方法：<strong>document.referrer</strong></p> <p>referrer 属性可返回载入当前文档的文档的 URL, 如果当前文档不是通过超链接访问的，那么当前文档的URL为NULL，这个属性允许客户端的 javascript 访问 HTTP 头部；</p> <p>referrer 属性，我们可以从 http 头部获取</p> <p>在控制的network中的请求头中可以找到referrer的信息</p></blockquote> <h4 id="无法获取-referrer-信息的情况"><a href="#无法获取-referrer-信息的情况" class="header-anchor">#</a> 无法获取 referrer 信息的情况</h4> <ul><li><p>直接在浏览器中输入地址</p></li> <li><p>使用<code>location.reload()</code>刷新（<code>location.href</code>或者<code>location.replace()</code>刷新有信息）</p></li> <li><p>在微信对话框中，点击进入微信自身浏览器</p></li> <li><p>扫码进入微信或QQ的浏览器</p></li> <li><p>直接新窗口打开一个页面</p></li> <li><p>从https的网站直接进入一个http协议的网站（Chrome下亲测）</p></li> <li><p><code>a</code>标签设置<code>rel=&quot;noreferrer&quot;</code>（兼容IE7+）</p></li> <li><p><code>meta</code>标签来控制不让浏览器发送<code>referer</code></p></li> <li><p>点击 flash 内部链接</p></li> <li><p>Chrome4.0以下，IE 5.5+以下返回空的字符串</p></li> <li><p>使用 修改 Location 进行页面导航的方法，会导致在IE下丢失 referrer，这可能是IE的一个BUG</p></li> <li><p>跨域</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>meta content<span class="token operator">=</span><span class="token string">&quot;never&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;referrer&quot;</span><span class="token operator">&gt;</span>
</code></pre></div></li></ul> <h4 id="document-referrer-的兼容性"><a href="#document-referrer-的兼容性" class="header-anchor">#</a> document.referrer 的兼容性</h4> <blockquote><p>document.referrer IE7都支持，它的兼容性比较高，Android 5.0开始支持，iOS都支持，PC端浏览器从IE7就开始支持了，兼容性没有什么大的问题。</p> <p>但是有个小小的问题，就是 IE 会主动清除 referref 属性。在IE中用javascript做跳转，比如用window.location.href = “”; google如果使用document.referrer无法取到浏览器请求的HTTP referrer，因为IE清空了。而其他主流浏览器Firefox和Chrome都会保留referrer，没办法，只好判断，如果是IE浏览器，就主动给它增加一个 referrer 。这样的原理就是给IE浏览器的页面偷偷加了个链接，然后自动点这个链接，于是referrer就能保留了。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://www.jb51.net'</span><span class="token punctuation">;</span>   
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">MSIE (\d+\.\d+);</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">MSIE(\d+\.\d+);</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span>   
<span class="token punctuation">{</span>   
    <span class="token keyword">var</span> referLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    referLink<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>   
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>referLink<span class="token punctuation">)</span><span class="token punctuation">;</span>   
    referLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>   
    location<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>   
<span class="token punctuation">}</span>
</code></pre></div><h4 id="document-referrer应用情景处理"><a href="#document-referrer应用情景处理" class="header-anchor">#</a> document.referrer应用情景处理</h4> <ul><li>根据 document.referrer 的来源来判断是否有来源信息，如果没有，则返回首页：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document<span class="token punctuation">.</span>referrer <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 没有来源页面信息的时候，改成首页URL地址</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.jsBack'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>这样，当再次点击返回按钮时，就可以返回首页了。</li></ul> <ul><li>根据 document.referrer 的来源url 是否为网站的 url，如果判断这个 url 的来路有问题，则屏蔽该 url 下的所有信息，比如不让其显示图片等。可以有效的防止盗链，目前百度统计，google ads统计，CNZZ统计，都是用的这个方法。</li></ul> <h4 id="window-history-back-1-与window-go-1-的区别"><a href="#window-history-back-1-与window-go-1-的区别" class="header-anchor">#</a> window.history.back(-1);与window.go(-1);的区别</h4> <table><thead><tr><th>window.history.back(-1)</th> <th>window.history.go(-1)</th></tr></thead> <tbody><tr><td>history.back(-1):   直接返回当前页的上一页，数据全部消息，是个新页面</td> <td>window.location.reload();  //刷新</td></tr> <tr><td>history.go(-1):  也是返回当前页的上一页，不过表单里的数据全部还在</td> <td>window.history.go(1);  //前进</td></tr> <tr><td>history.back(1)  前进</td> <td>window.history.go(-1);  //返回+刷新</td></tr> <tr><td>history.back(-1)  后退</td> <td>window.history.forward();  //前进</td></tr> <tr><td>window.history.back();   //返回</td> <td></td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/other/Tools/js/数组基本操作.html" class="prev">
        js清空数组的方法
      </a></span> <span class="next"><a href="/other/Tools/js操作.html">
        待补充:
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.19fb38d9.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/100.98bfa33c.js" defer></script>
  </body>
</html>
