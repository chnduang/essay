<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序重点API使用 | duangdong随笔</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端相关知识归纳总结">
    <meta name="keywords" content="qd-blog,js,vuepress,leetcode,react,react进阶,css,js进阶,react性能优化,js设计模式">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.19fb38d9.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/69.2833c9ff.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/100.98bfa33c.js"><link rel="prefetch" href="/assets/js/101.b289a7e4.js"><link rel="prefetch" href="/assets/js/102.4408c218.js"><link rel="prefetch" href="/assets/js/103.add71c00.js"><link rel="prefetch" href="/assets/js/104.33a74898.js"><link rel="prefetch" href="/assets/js/105.8cac64cc.js"><link rel="prefetch" href="/assets/js/106.7d9b6e7b.js"><link rel="prefetch" href="/assets/js/107.8d61841f.js"><link rel="prefetch" href="/assets/js/108.64c7dc9f.js"><link rel="prefetch" href="/assets/js/109.af0760c5.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.a9288e96.js"><link rel="prefetch" href="/assets/js/111.56c937b2.js"><link rel="prefetch" href="/assets/js/112.1e29bc9a.js"><link rel="prefetch" href="/assets/js/113.a862c823.js"><link rel="prefetch" href="/assets/js/114.680f006b.js"><link rel="prefetch" href="/assets/js/115.ecf64f2d.js"><link rel="prefetch" href="/assets/js/116.3f45f4ac.js"><link rel="prefetch" href="/assets/js/117.03900a62.js"><link rel="prefetch" href="/assets/js/118.2ce2e904.js"><link rel="prefetch" href="/assets/js/119.3caae632.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.32655377.js"><link rel="prefetch" href="/assets/js/121.a47c08a1.js"><link rel="prefetch" href="/assets/js/122.308c088c.js"><link rel="prefetch" href="/assets/js/123.76f9ad80.js"><link rel="prefetch" href="/assets/js/124.376011d5.js"><link rel="prefetch" href="/assets/js/125.5e978587.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.47d58de3.js"><link rel="prefetch" href="/assets/js/23.53b640d9.js"><link rel="prefetch" href="/assets/js/24.d5c3b1a8.js"><link rel="prefetch" href="/assets/js/25.a2d5cd2a.js"><link rel="prefetch" href="/assets/js/26.c382af40.js"><link rel="prefetch" href="/assets/js/27.7a610065.js"><link rel="prefetch" href="/assets/js/28.8f34c662.js"><link rel="prefetch" href="/assets/js/29.cb00e0aa.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.52209dfe.js"><link rel="prefetch" href="/assets/js/31.99c833cd.js"><link rel="prefetch" href="/assets/js/32.e558e539.js"><link rel="prefetch" href="/assets/js/33.b8982b41.js"><link rel="prefetch" href="/assets/js/34.b67ab4c0.js"><link rel="prefetch" href="/assets/js/35.f11112a1.js"><link rel="prefetch" href="/assets/js/36.599f5ecb.js"><link rel="prefetch" href="/assets/js/37.a57f225d.js"><link rel="prefetch" href="/assets/js/38.b2c99147.js"><link rel="prefetch" href="/assets/js/39.d9190dcf.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.ed283c99.js"><link rel="prefetch" href="/assets/js/41.8c50c152.js"><link rel="prefetch" href="/assets/js/42.066b9190.js"><link rel="prefetch" href="/assets/js/43.62de7c6a.js"><link rel="prefetch" href="/assets/js/44.12b279ed.js"><link rel="prefetch" href="/assets/js/45.7b57db8a.js"><link rel="prefetch" href="/assets/js/46.7db0ade0.js"><link rel="prefetch" href="/assets/js/47.788b73fb.js"><link rel="prefetch" href="/assets/js/48.3c23d2bc.js"><link rel="prefetch" href="/assets/js/49.b42e40fe.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.83632853.js"><link rel="prefetch" href="/assets/js/51.5f9843fd.js"><link rel="prefetch" href="/assets/js/52.8e9c42b5.js"><link rel="prefetch" href="/assets/js/53.f4ff5b3c.js"><link rel="prefetch" href="/assets/js/54.9f6cad6f.js"><link rel="prefetch" href="/assets/js/55.166a16c8.js"><link rel="prefetch" href="/assets/js/56.427340ae.js"><link rel="prefetch" href="/assets/js/57.30717b37.js"><link rel="prefetch" href="/assets/js/58.8d96e195.js"><link rel="prefetch" href="/assets/js/59.644d91b7.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.06204820.js"><link rel="prefetch" href="/assets/js/61.39bd88b2.js"><link rel="prefetch" href="/assets/js/62.9c921070.js"><link rel="prefetch" href="/assets/js/63.62cf4cbc.js"><link rel="prefetch" href="/assets/js/64.edaeae65.js"><link rel="prefetch" href="/assets/js/65.1076e1dd.js"><link rel="prefetch" href="/assets/js/66.062ec561.js"><link rel="prefetch" href="/assets/js/67.281a7d23.js"><link rel="prefetch" href="/assets/js/68.44ab9152.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.1906f6a7.js"><link rel="prefetch" href="/assets/js/71.67d26af9.js"><link rel="prefetch" href="/assets/js/72.5a9d6eeb.js"><link rel="prefetch" href="/assets/js/73.860f4c64.js"><link rel="prefetch" href="/assets/js/74.40240839.js"><link rel="prefetch" href="/assets/js/75.7dad641e.js"><link rel="prefetch" href="/assets/js/76.519f5c94.js"><link rel="prefetch" href="/assets/js/77.bc48791d.js"><link rel="prefetch" href="/assets/js/78.7c3c6c6d.js"><link rel="prefetch" href="/assets/js/79.3e07757e.js"><link rel="prefetch" href="/assets/js/80.ec60bccd.js"><link rel="prefetch" href="/assets/js/81.533f5f24.js"><link rel="prefetch" href="/assets/js/82.97176153.js"><link rel="prefetch" href="/assets/js/83.ce80c85f.js"><link rel="prefetch" href="/assets/js/84.ab8a3f53.js"><link rel="prefetch" href="/assets/js/85.9e211cea.js"><link rel="prefetch" href="/assets/js/86.c0e94065.js"><link rel="prefetch" href="/assets/js/87.5cd05974.js"><link rel="prefetch" href="/assets/js/88.6d2055c3.js"><link rel="prefetch" href="/assets/js/89.52e5c9ad.js"><link rel="prefetch" href="/assets/js/90.0f16475f.js"><link rel="prefetch" href="/assets/js/91.6be93131.js"><link rel="prefetch" href="/assets/js/92.f1a854a8.js"><link rel="prefetch" href="/assets/js/93.cda09443.js"><link rel="prefetch" href="/assets/js/94.7dbb29c1.js"><link rel="prefetch" href="/assets/js/95.13937ab0.js"><link rel="prefetch" href="/assets/js/96.785fbd27.js"><link rel="prefetch" href="/assets/js/97.e8e90acc.js"><link rel="prefetch" href="/assets/js/98.01539f93.js"><link rel="prefetch" href="/assets/js/99.6271cd14.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong随笔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link router-link-active">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link router-link-active">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mini-program/" aria-current="page" class="sidebar-link">react</a></li><li><a href="/mini-program/jsencrypt.html" class="sidebar-link">小程序使用jsencrypt加密</a></li><li><a href="/mini-program/navigateTo-url.html" class="sidebar-link">小程序中页面跳转传参对象问题</a></li><li><a href="/mini-program/uuid.html" class="sidebar-link">小程序中使用uuid</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云开发</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/mini-program/小程序中使用jsencrypt.html" class="sidebar-link">修改jsencrypt的源文件</a></li><li><a href="/mini-program/小程序云函数使用async.html" class="sidebar-link">小程序云函数使用async</a></li><li><a href="/mini-program/小程序接口20条数据.html" class="sidebar-link">微信小程序接口只能请求20条数据限制</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>微信</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mini-program/微信/api使用.html" class="active sidebar-link">微信小程序重点API使用</a></li><li><a href="/mini-program/微信/link.html" class="sidebar-link">/mini-program/微信/link.html</a></li><li><a href="/mini-program/微信/login.html" class="sidebar-link">小程序login登录前后端实现</a></li><li><a href="/mini-program/微信/mpvue.html" class="sidebar-link">mpVue2.0多端小程序框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>方法使用</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/mini-program/钉钉环境.html" class="sidebar-link">钉钉免登录出现的问题</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>飞书</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="微信小程序重点api使用"><a href="#微信小程序重点api使用" class="header-anchor">#</a> 微信小程序重点API使用</h2> <h3 id="小程序的执行流程"><a href="#小程序的执行流程" class="header-anchor">#</a> 小程序的执行流程</h3> <h3 id="注册一个小程序-小程序的生命周期"><a href="#注册一个小程序-小程序的生命周期" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html" target="_blank" rel="noopener noreferrer">注册一个小程序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（小程序的生命周期)</h3> <ul><li>注册App时，一般会做什么
<ul><li>判断小程序的进入场景</li> <li>监听生命周期函数，在生命周期中执行对应的业务逻辑，比如在某个生命周期函数中获取微信用户的信息。</li> <li>因为App()实例只有一个，并且是全局共享的( 单例对象)，所以我们可以将一些共享数据放在这里。</li></ul></li> <li>小程序后台存活时间:
htps://developers.weixin.qq.com/miniprogram/dev/framework/operating-mechanism.html</li> <li>小程序的打开场景较多:
<ul><li>常见的打开场景:群聊会话中打开、小程序列表中打开、微信扫一扫打开、另一个小程序打开
https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html</li></ul></li> <li>如何确定场景?
<ul><li>在onLaunch和onShow生命周期回调函数中，会有options参数，其中有scene值</li></ul></li></ul> <h4 id="onlanch"><a href="#onlanch" class="header-anchor">#</a> onLanch</h4> <ul><li><p>发请求</p></li> <li><p>获取用户的数据</p> <ul><li>wx.getUserInfo</li> <li>button open-type = getUserInfo</li> <li>open-data</li></ul></li></ul> <h4 id="onshow-option"><a href="#onshow-option" class="header-anchor">#</a> onShow（option）</h4> <ul><li>获取场景，根据不同的场景做对应的逻辑处理</li></ul> <h4 id="onhide"><a href="#onhide" class="header-anchor">#</a> onHide</h4> <h4 id="onerror"><a href="#onerror" class="header-anchor">#</a> onError</h4> <h3 id="注册一个页面-页面的生命周期"><a href="#注册一个页面-页面的生命周期" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html" target="_blank" rel="noopener noreferrer">注册一个页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（页面的生命周期）</h3> <h4 id="onload"><a href="#onload" class="header-anchor">#</a> onLoad</h4> <blockquote><p>初次加载</p></blockquote> <h4 id="onshow"><a href="#onshow" class="header-anchor">#</a> onShow</h4> <blockquote><p>页面显示</p></blockquote> <h4 id="onready"><a href="#onready" class="header-anchor">#</a> onReady</h4> <blockquote><p>初次渲染完成</p></blockquote> <h4 id="onhide-2"><a href="#onhide-2" class="header-anchor">#</a> onHide</h4> <h4 id="onunload"><a href="#onunload" class="header-anchor">#</a> onUnLoad</h4> <h4 id="onshareappmessage"><a href="#onshareappmessage" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object" target="_blank" rel="noopener noreferrer">onShareAppMessage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <blockquote><p>监听用户点击页面内转发按钮（<a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" target="_blank" rel="noopener noreferrer">button<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 组件 <code>open-type=&quot;share&quot;</code>）</p> <p>右上角菜单“转发”按钮的行为，并自定义转发内容。</p></blockquote> <ul><li><div class="language- extra-class"><pre class="language-text"><code>&lt;button open-type=&quot;share&quot;&gt;点击分享&lt;/button&gt;
</code></pre></div></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">onShareAppMessage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'自定义转发标题'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/pages'</span>    <span class="token comment">// 用户点进分享所进入的页面</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="wxs作用以及语法"><a href="#wxs作用以及语法" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/01wxs-module.html" target="_blank" rel="noopener noreferrer">WXS作用以及语法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <blockquote><p>WXS（WeiXin Script）是小程序的一套脚本语言，结合 <code>WXML</code>，可以构建出页面的结构。</p> <p>WXS 与 JavaScript 是不同的语言，有自己的语法，并不和 JavaScript 一致。</p> <p>但基本是和js一样的</p> <p>主要应用的场景是 时间格式化以及过滤器的使用，也可以写成js作成工具类，在我们的js文件中先使用</p></blockquote> <h4 id="两种wxs的写法"><a href="#两种wxs的写法" class="header-anchor">#</a> 两种wxs的写法</h4> <ul><li><p><code>wxml</code>中</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
    const sum = () =&gt; {
      
      };
  	module.exports = {
  		sum
  	}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{info.sum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><code>.wxs</code>文件中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>wxs src<span class="token operator">=</span><span class="token string">&quot;./wxs/demo.wxs&quot;</span> module<span class="token operator">=</span><span class="token string">&quot;info&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div></li></ul> <h3 id="自定义组件"><a href="#自定义组件" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html" target="_blank" rel="noopener noreferrer">自定义组件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <blockquote><p>只能使用wx:if；无法使用hidden</p></blockquote> <blockquote><p>父子间传值和vue相似</p></blockquote> <h4 id="组件和页面通信"><a href="#组件和页面通信" class="header-anchor">#</a> 组件和页面通信</h4> <h4 id="父传子"><a href="#父传子" class="header-anchor">#</a> 父传子</h4> <blockquote><p>通过属性绑定的形式将值传递给子组件</p></blockquote> <ul><li><p>获取子组件并调用其方法 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88" target="_blank" rel="noopener noreferrer">selectComponent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// this.selectComponent('.tab')   获取到子组件的示例对象this</span>
<span class="token comment">// setCurrentIndex 为组件的方法，可以直接setData({}) 。不推荐直接修改数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'.tab'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCurrentIndex</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li></ul> <h4 id="子传父"><a href="#子传父" class="header-anchor">#</a> 子传父</h4> <blockquote><p>通过 <code>triggerEvent</code>  触发事件将数据传递给父组件</p></blockquote> <ul><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html" target="_blank" rel="noopener noreferrer">triggerEvent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="插槽slot"><a href="#插槽slot" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#%E7%BB%84%E4%BB%B6wxml%E7%9A%84slot" target="_blank" rel="noopener noreferrer">插槽slot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <blockquote><p>在组件的wxml中可以包含 <code>slot</code> 节点，用于承载组件使用者提供的wxml结构。</p> <p>默认情况下，一个组件的wxml中只能有一个slot。需要使用多slot时，可以在组件js中声明启用。</p></blockquote> <ul><li><p>多插槽的组件声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 在组件定义时的选项中启用多slot支持</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>此时，可以在这个组件的wxml中使用多个slot，以不同的 <code>name</code> 来区分。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 组件模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>这里是组件的内部细节<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>使用时，用 <code>slot</code> 属性来将节点插入到不同的slot上。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 引用组件的页面模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这部分内容将被放置在组件 &lt;slot name=&quot;before&quot;&gt; 的位置上 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这里是插入到组件slot name=&quot;before&quot;中的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这部分内容将被放置在组件 &lt;slot name=&quot;after&quot;&gt; 的位置上 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这里是插入到组件slot name=&quot;after&quot;中的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h4 id="组件的样式"><a href="#组件的样式" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html" target="_blank" rel="noopener noreferrer">组件的样式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li><p>组件内的样式对外部样式的影响</p> <ul><li>组件内的class样式，只对组件wxml内的节点生效，对于引用组件的Page页面不生效。</li> <li>组件内不能使用id选择器、属性选择器、标签选择器</li></ul></li> <li><p>外部样式 对组件内样式 的影响</p> <ul><li>外部使用class的样式，只对外部wxml的class生效，对组件内是不生效的</li> <li>外部使用了id选择器、属性选择器不会对组件内产生影响</li> <li>外部使用了标签选择器,会对组件内产生影响</li></ul></li> <li><p>组件内的class样式和组件外的class样式，默认是有一个隔离效果的;</p></li> <li><p>为了防止样式的错乱，官方不推荐使用id、属性、标签选择器;</p></li> <li><p><strong><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB" target="_blank" rel="noopener noreferrer">组件和页面的样式影响<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'isolated'</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ul> <p>})</p> <div class="language- extra-class"><pre class="language-text"><code>
+ 如果这个 [Component 构造器用于构造页面](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html) ，则默认值为 `shared` ，且还有以下几个额外的样式隔离选项可用：
  - `page-isolated` 表示在这个页面禁用 app.wxss ，同时，页面的 wxss 不会影响到其他自定义组件；
  - `page-apply-shared` 表示在这个页面禁用 app.wxss ，同时，页面 wxss 样式不会影响到其他自定义组件，但设为 `shared` 的自定义组件会影响到页面；
  - `page-shared` 表示在这个页面禁用 app.wxss ，同时，页面 wxss 样式会影响到其他设为 `apply-shared` 或 `shared` 的自定义组件，也会受到设为 `shared` 的自定义组件的影响。

+ **[页面向组件传递样式](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#外部样式类)**

&gt; **注意：在同一个节点上使用普通样式类和外部样式类时，两个类的优先级是未定义的，因此最好避免这种情况。**

+ ```js
  /* 组件 custom-component.js */
  Component({
    externalClasses: ['my-class']
  })
  
  &lt;!-- 组件 custom-component.wxml --&gt;
  &lt;custom-component class=&quot;my-class&quot;&gt;这段文本的颜色由组件外的 class 决定&lt;/custom-component&gt;
  ```

+ ```js
  &lt;!-- 页面的 WXML --&gt;
  &lt;custom-component my-class=&quot;red-text&quot; /&gt;
  &lt;custom-component my-class=&quot;large-text&quot; /&gt;
  &lt;!-- 以下写法需要基础库版本 2.7.1 以上 --&gt;
  &lt;custom-component my-class=&quot;red-text large-text&quot; /&gt;
  ```

### [WX.API]( https://developers.weixin.qq.com/miniprogram/dev/api/ )

#### [网络]( https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html ) 

+ 请求 （request）

+ 我们一般会对

```js
import { baseUrl } from './config.js';
export default (options) =&gt; {
  wx.showLoading({
    title: '数据加载中',
  });
  return new Promise((resolve, reject) =&gt; {
    wx.request({
      url: `${baseUrl}/${options.url}`,
      method: options.method || 'get',
      data: options.data || {},
      success: resolve,
      fail: reject,
      complete: (res) =&gt; {
        wx.hideLoading();
      }
    });
  });
}
</code></pre></div><ul><li><p>对各个页面中封装请求方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">'./index.js'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getHomeList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">http</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'home/multidata'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
  getHomeList
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="开放接口"><a href="#开放接口" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html" target="_blank" rel="noopener noreferrer">开放接口<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li><strong>登录 （wx.login）</strong></li> <li>当我们不需要关心开发者服务器开发的时候，前端需要
<ul><li>调用wx.login() 获取code</li> <li>调用wx.request发送code到服务器，返回一个登录状态的标识，比如token</li> <li>我们使用wx.setStorageSync/setStorage,将标识token进行存储
<ul><li>这个和我们的localStorage一样</li></ul></li> <li>携带token进行请求，获取返回的数据</li></ul></li></ul> <h4 id="导航"><a href="#导航" class="header-anchor">#</a> <a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html" target="_blank" rel="noopener noreferrer">导航<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li><p><strong>navigator</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 通过url进行参数的传递</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> sample<span class="token punctuation">.</span>wxml <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn-area&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">&quot;/page/navigate/navigate?title=navigate&quot;</span> hover<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;navigator-hover&quot;</span><span class="token operator">&gt;</span>跳转到新页面
 <span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">&quot;../../redirect/redirect/redirect?title=redirect&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;redirect&quot;</span> hover<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;other-navigator-hover&quot;</span><span class="token operator">&gt;</span>在当前页打开
 <span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">&quot;/page/index/index&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;switchTab&quot;</span> hover<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;other-navigator-hover&quot;</span><span class="token operator">&gt;</span>切换 Tab
 <span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>navigator target<span class="token operator">=</span><span class="token string">&quot;miniProgram&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;navigate&quot;</span> app<span class="token operator">-</span>id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> path<span class="token operator">=</span><span class="token string">&quot;&quot;</span> extra<span class="token operator">-</span>data<span class="token operator">=</span><span class="token string">&quot;&quot;</span> version<span class="token operator">=</span><span class="token string">&quot;release&quot;</span><span class="token operator">&gt;</span>打开绑定的小程序
 <span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">&quot;/page/index/index&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;navigateBack&quot;</span> delta<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>回退 Tab
 <span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div></li> <li><p>接受传递过来的数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在跳转到的页面中</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//在options中拿到</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>跳转的页面向返回的页面回传数据</p> <ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html" target="_blank" rel="noopener noreferrer">getCurrentPages() <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>获取当前栈的所有页面。数组中第一个元素为首页，最后一个元素为当前页面。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 <span class="token function">onUnload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取首页页面对象</span>
    <span class="token keyword">const</span> home <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用home页面中的方法修改数据</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="一些需要注意的地方"><a href="#一些需要注意的地方" class="header-anchor">#</a> 一些需要注意的地方</h3> <ul><li><p>因为WXML节点标签名只能是小写字母、中划线和下划线的组合，所以自定义组件的标签名也只能包含这些字符。</p></li> <li><p>自定义组件也是可以引用自定义组件的，引用方法类似于页面引用自定义组件的方式(使用
usingComponents字段)。</p></li> <li><p>自定义组件和页面所在项目根目录名不能以&quot;Wx-&quot; 为前缀，否则会报错。</p></li> <li><p>如果在appjson的usingComponents声明某个组件，那么所有页面和组件可以直接使用该组件。</p></li> <li><p>如何获取每个自定义组件到顶部的距离</p> <ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html" target="_blank" rel="noopener noreferrer">wx.createSelectorQuery()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>返回一个 SelectorQuery 对象实例。在自定义组件或包含自定义组件的页面中，应使用 <code>this.createSelectorQuery()</code> 来代替</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.tab'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rect</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">tabTop</span><span class="token operator">:</span> rect<span class="token punctuation">.</span>top
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//这里必须有exec()才能执行</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mini-program/小程序接口20条数据.html" class="prev">
        微信小程序接口只能请求20条数据限制
      </a></span> <span class="next"><a href="/mini-program/微信/link.html">
        /mini-program/微信/link.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.19fb38d9.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/69.2833c9ff.js" defer></script>
  </body>
</html>
