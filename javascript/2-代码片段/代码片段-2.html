<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实用的JavaScript 代码片段，你千万要收藏好（上） | duangdong随笔</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端相关知识归纳总结">
    <meta name="keywords" content="qd-blog,js,vuepress,leetcode,react,react进阶,css,js进阶,react性能优化,js设计模式">
    
    <link rel="preload" href="/assets/css/0.styles.b4a844ec.css" as="style"><link rel="preload" href="/assets/js/app.19fb38d9.js" as="script"><link rel="preload" href="/assets/js/2.57da4f88.js" as="script"><link rel="preload" href="/assets/js/1.a76cc220.js" as="script"><link rel="preload" href="/assets/js/51.5f9843fd.js" as="script"><link rel="prefetch" href="/assets/js/10.50f73657.js"><link rel="prefetch" href="/assets/js/100.98bfa33c.js"><link rel="prefetch" href="/assets/js/101.b289a7e4.js"><link rel="prefetch" href="/assets/js/102.4408c218.js"><link rel="prefetch" href="/assets/js/103.add71c00.js"><link rel="prefetch" href="/assets/js/104.33a74898.js"><link rel="prefetch" href="/assets/js/105.8cac64cc.js"><link rel="prefetch" href="/assets/js/106.7d9b6e7b.js"><link rel="prefetch" href="/assets/js/107.8d61841f.js"><link rel="prefetch" href="/assets/js/108.64c7dc9f.js"><link rel="prefetch" href="/assets/js/109.af0760c5.js"><link rel="prefetch" href="/assets/js/11.0390ceee.js"><link rel="prefetch" href="/assets/js/110.a9288e96.js"><link rel="prefetch" href="/assets/js/111.56c937b2.js"><link rel="prefetch" href="/assets/js/112.1e29bc9a.js"><link rel="prefetch" href="/assets/js/113.a862c823.js"><link rel="prefetch" href="/assets/js/114.680f006b.js"><link rel="prefetch" href="/assets/js/115.ecf64f2d.js"><link rel="prefetch" href="/assets/js/116.3f45f4ac.js"><link rel="prefetch" href="/assets/js/117.03900a62.js"><link rel="prefetch" href="/assets/js/118.2ce2e904.js"><link rel="prefetch" href="/assets/js/119.3caae632.js"><link rel="prefetch" href="/assets/js/12.f88bec36.js"><link rel="prefetch" href="/assets/js/120.32655377.js"><link rel="prefetch" href="/assets/js/121.a47c08a1.js"><link rel="prefetch" href="/assets/js/122.308c088c.js"><link rel="prefetch" href="/assets/js/123.76f9ad80.js"><link rel="prefetch" href="/assets/js/124.376011d5.js"><link rel="prefetch" href="/assets/js/125.5e978587.js"><link rel="prefetch" href="/assets/js/13.963ad03b.js"><link rel="prefetch" href="/assets/js/14.512f15b9.js"><link rel="prefetch" href="/assets/js/15.a674496c.js"><link rel="prefetch" href="/assets/js/16.ed7e507f.js"><link rel="prefetch" href="/assets/js/17.de667ca5.js"><link rel="prefetch" href="/assets/js/18.b44e84af.js"><link rel="prefetch" href="/assets/js/19.5b5ad6a1.js"><link rel="prefetch" href="/assets/js/20.6800493a.js"><link rel="prefetch" href="/assets/js/21.6589052c.js"><link rel="prefetch" href="/assets/js/22.47d58de3.js"><link rel="prefetch" href="/assets/js/23.53b640d9.js"><link rel="prefetch" href="/assets/js/24.d5c3b1a8.js"><link rel="prefetch" href="/assets/js/25.a2d5cd2a.js"><link rel="prefetch" href="/assets/js/26.c382af40.js"><link rel="prefetch" href="/assets/js/27.7a610065.js"><link rel="prefetch" href="/assets/js/28.8f34c662.js"><link rel="prefetch" href="/assets/js/29.cb00e0aa.js"><link rel="prefetch" href="/assets/js/3.13e892f5.js"><link rel="prefetch" href="/assets/js/30.52209dfe.js"><link rel="prefetch" href="/assets/js/31.99c833cd.js"><link rel="prefetch" href="/assets/js/32.e558e539.js"><link rel="prefetch" href="/assets/js/33.b8982b41.js"><link rel="prefetch" href="/assets/js/34.b67ab4c0.js"><link rel="prefetch" href="/assets/js/35.f11112a1.js"><link rel="prefetch" href="/assets/js/36.599f5ecb.js"><link rel="prefetch" href="/assets/js/37.a57f225d.js"><link rel="prefetch" href="/assets/js/38.b2c99147.js"><link rel="prefetch" href="/assets/js/39.d9190dcf.js"><link rel="prefetch" href="/assets/js/4.5bdb9365.js"><link rel="prefetch" href="/assets/js/40.ed283c99.js"><link rel="prefetch" href="/assets/js/41.8c50c152.js"><link rel="prefetch" href="/assets/js/42.066b9190.js"><link rel="prefetch" href="/assets/js/43.62de7c6a.js"><link rel="prefetch" href="/assets/js/44.12b279ed.js"><link rel="prefetch" href="/assets/js/45.7b57db8a.js"><link rel="prefetch" href="/assets/js/46.7db0ade0.js"><link rel="prefetch" href="/assets/js/47.788b73fb.js"><link rel="prefetch" href="/assets/js/48.3c23d2bc.js"><link rel="prefetch" href="/assets/js/49.b42e40fe.js"><link rel="prefetch" href="/assets/js/5.7c68fdb5.js"><link rel="prefetch" href="/assets/js/50.83632853.js"><link rel="prefetch" href="/assets/js/52.8e9c42b5.js"><link rel="prefetch" href="/assets/js/53.f4ff5b3c.js"><link rel="prefetch" href="/assets/js/54.9f6cad6f.js"><link rel="prefetch" href="/assets/js/55.166a16c8.js"><link rel="prefetch" href="/assets/js/56.427340ae.js"><link rel="prefetch" href="/assets/js/57.30717b37.js"><link rel="prefetch" href="/assets/js/58.8d96e195.js"><link rel="prefetch" href="/assets/js/59.644d91b7.js"><link rel="prefetch" href="/assets/js/6.c8da7ca7.js"><link rel="prefetch" href="/assets/js/60.06204820.js"><link rel="prefetch" href="/assets/js/61.39bd88b2.js"><link rel="prefetch" href="/assets/js/62.9c921070.js"><link rel="prefetch" href="/assets/js/63.62cf4cbc.js"><link rel="prefetch" href="/assets/js/64.edaeae65.js"><link rel="prefetch" href="/assets/js/65.1076e1dd.js"><link rel="prefetch" href="/assets/js/66.062ec561.js"><link rel="prefetch" href="/assets/js/67.281a7d23.js"><link rel="prefetch" href="/assets/js/68.44ab9152.js"><link rel="prefetch" href="/assets/js/69.2833c9ff.js"><link rel="prefetch" href="/assets/js/7.e4c88d0e.js"><link rel="prefetch" href="/assets/js/70.1906f6a7.js"><link rel="prefetch" href="/assets/js/71.67d26af9.js"><link rel="prefetch" href="/assets/js/72.5a9d6eeb.js"><link rel="prefetch" href="/assets/js/73.860f4c64.js"><link rel="prefetch" href="/assets/js/74.40240839.js"><link rel="prefetch" href="/assets/js/75.7dad641e.js"><link rel="prefetch" href="/assets/js/76.519f5c94.js"><link rel="prefetch" href="/assets/js/77.bc48791d.js"><link rel="prefetch" href="/assets/js/78.7c3c6c6d.js"><link rel="prefetch" href="/assets/js/79.3e07757e.js"><link rel="prefetch" href="/assets/js/80.ec60bccd.js"><link rel="prefetch" href="/assets/js/81.533f5f24.js"><link rel="prefetch" href="/assets/js/82.97176153.js"><link rel="prefetch" href="/assets/js/83.ce80c85f.js"><link rel="prefetch" href="/assets/js/84.ab8a3f53.js"><link rel="prefetch" href="/assets/js/85.9e211cea.js"><link rel="prefetch" href="/assets/js/86.c0e94065.js"><link rel="prefetch" href="/assets/js/87.5cd05974.js"><link rel="prefetch" href="/assets/js/88.6d2055c3.js"><link rel="prefetch" href="/assets/js/89.52e5c9ad.js"><link rel="prefetch" href="/assets/js/90.0f16475f.js"><link rel="prefetch" href="/assets/js/91.6be93131.js"><link rel="prefetch" href="/assets/js/92.f1a854a8.js"><link rel="prefetch" href="/assets/js/93.cda09443.js"><link rel="prefetch" href="/assets/js/94.7dbb29c1.js"><link rel="prefetch" href="/assets/js/95.13937ab0.js"><link rel="prefetch" href="/assets/js/96.785fbd27.js"><link rel="prefetch" href="/assets/js/97.e8e90acc.js"><link rel="prefetch" href="/assets/js/98.01539f93.js"><link rel="prefetch" href="/assets/js/99.6271cd14.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5143d2e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4a844ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong随笔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><span class="title">JS</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS" class="mobile-dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          js基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javascript/2-代码片段/代码片段-2.html" class="nav-link">
  《js代码片段》
</a></li><li class="dropdown-subitem"><a href="/javascript/3-常用正则/emoji.html" class="nav-link">
  《常用正则》
</a></li><li class="dropdown-subitem"><a href="/javascript/4-常见问题/qa.html" class="nav-link">
  《常用问题》
</a></li><li class="dropdown-subitem"><a href="/javascript/1-重要类型/Map.html" class="nav-link">
  《js重要类型》
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/c3/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/visual/" class="nav-link">
  可视化
</a></div><div class="nav-item"><a href="/skill/" class="nav-link">
  开发技巧
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/angular/" class="nav-link">
  Angular
</a></div><div class="nav-item"><a href="/mini-program/" class="nav-link">
  小程序
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://link.aduang.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/javascript/" aria-current="page" class="sidebar-link">js</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1-重要类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2-代码片段</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript/2-代码片段/代码片段-2.html" class="active sidebar-link">实用的JavaScript 代码片段，你千万要收藏好（上）</a></li><li><a href="/javascript/2-代码片段/代码片段-3.html" class="sidebar-link">127个超级实用的JavaScript 代码片段，你千万要收藏好（中）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3-常用正则</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4-tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webSocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>web性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/javascript/使用.html" class="sidebar-link">开发中经常遇到的JavaScript问题整理(超实用)</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="实用的javascript-代码片段-你千万要收藏好-上"><a href="#实用的javascript-代码片段-你千万要收藏好-上" class="header-anchor">#</a> 实用的JavaScript 代码片段，你千万要收藏好（上）</h2> <h1 id="_1、all"><a href="#_1、all" class="header-anchor">#</a> <strong>1、all</strong></h1> <p>如果谓词函数对集合中的所有元素返回 true，则此代码段返回 true，否则返回 false。 如果你想使用布尔值作为默认值，你可以省略第二个参数 fn。</p> <div class="language- extra-class"><pre class="language-text"><code>const all = (arr, fn = Boolean) =&gt; arr.every(fn);
all([4, 2, 3], x =&gt; x &gt; 1); // trueall([1, 2, 3]); // true
</code></pre></div><h1 id="_2、-allequal"><a href="#_2、-allequal" class="header-anchor">#</a> <strong>2、 allEqual</strong></h1> <p>此代码段检查数组的所有元素是否相等。</p> <div class="language- extra-class"><pre class="language-text"><code>const allEqual = arr =&gt; arr.every(val =&gt; val === arr[0]);
allEqual([1, 2, 3, 4, 5, 6]); // falseallEqual([1, 1, 1, 1]); // true
</code></pre></div><h1 id="_3、approximatelyequal"><a href="#_3、approximatelyequal" class="header-anchor">#</a> <strong>3、approximatelyEqual</strong></h1> <p>此代码段检查两个数字是否彼此近似相等，差异很小。</p> <div class="language- extra-class"><pre class="language-text"><code>const approximatelyEqual = (v1, v2, epsilon = 0.001) =&gt; Math.abs(v1  v2) &lt; epsilon;
approximatelyEqual(Math.PI / 2.0, 1.5708); // true
</code></pre></div><h1 id="_4、arraytocsv"><a href="#_4、arraytocsv" class="header-anchor">#</a> <strong>4、arrayToCSV</strong></h1> <p>此代码段将没有逗号或双引号的元素转换为具有逗号分隔值的字符串。</p> <div class="language- extra-class"><pre class="language-text"><code>const arrayToCSV = (arr, delimiter = ',') =&gt;  arr.map(v =&gt; v.map(x =&gt; `&quot;${x}&quot;`).join(delimiter)).join('\n');
arrayToCSV([['a', 'b'], ['c', 'd']]); // '&quot;a&quot;,&quot;b&quot;\n&quot;c&quot;,&quot;d&quot;'arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '&quot;a&quot;;&quot;b&quot;\n&quot;c&quot;;&quot;d&quot;'
</code></pre></div><h1 id="_5、arraytohtmllist"><a href="#_5、arraytohtmllist" class="header-anchor">#</a> <strong>5、arrayToHtmlList</strong></h1> <p>此代码段将数组元素转换为<code>&lt;li&gt;</code>标签，并将它们附加到给定 ID 的列表中。</p> <div class="language- extra-class"><pre class="language-text"><code>const arrayToHtmlList = (arr, listID) =&gt;  (el =&gt; (    (el = document.querySelector('#' + listID)),    (el.innerHTML += arr.map(item =&gt; `&lt;li&gt;${item}&lt;/li&gt;`).join(''))  ))();
arrayToHtmlList(['item 1', 'item 2'], 'myListID');
</code></pre></div><h1 id="_6、attempt"><a href="#_6、attempt" class="header-anchor">#</a> <strong>6、attempt</strong></h1> <p>此代码段执行一个函数，返回结果或捕获的错误对象。</p> <div class="language- extra-class"><pre class="language-text"><code>const attempt = (fn, ...args) =&gt; {  try {    return fn(...args);  } catch (e) {    return e instanceof Error ? e : new Error(e);  }};var elements = attempt(function(selector) {  return document.querySelectorAll(selector);}, '&gt;_&gt;');if (elements instanceof Error) elements = []; // elements = []
</code></pre></div><h1 id="_7、average"><a href="#_7、average" class="header-anchor">#</a> <strong>7、average</strong></h1> <p>此代码段返回两个或多个数值的平均值。</p> <div class="language- extra-class"><pre class="language-text"><code>const average = (...nums) =&gt; nums.reduce((acc, val) =&gt; acc + val, 0) / nums.length;average(...[1, 2, 3]); // 2average(1, 2, 3); // 2
</code></pre></div><h1 id="_8、averageby"><a href="#_8、averageby" class="header-anchor">#</a> <strong>8、averageBy</strong></h1> <p>此代码段在最初使用给定函数将每个元素映射到值后返回数组的平均值。</p> <div class="language- extra-class"><pre class="language-text"><code>const averageBy = (arr, fn) =&gt;  arr.map(typeof fn === 'function' ? fn : val =&gt; val[fn]).reduce((acc, val) =&gt; acc + val, 0) /  arr.length;
averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o =&gt; o.n); // 5averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5
</code></pre></div><h1 id="_9、bifurcate"><a href="#_9、bifurcate" class="header-anchor">#</a> <strong>9、bifurcate</strong></h1> <p>此代码段将值分成两组，然后将过滤器的真实元素放入第一组，否则放入第二组。</p> <p>你可以使用 Array.prototype.reduce() 和 Array.prototype.push() 根据过滤器将元素添加到组中。</p> <div class="language- extra-class"><pre class="language-text"><code>const bifurcate = (arr, filter) =&gt;  arr.reduce((acc, val, i) =&gt; (acc[filter[i] ? 0 : 1].push(val), acc), [[], []]);bifurcate(['beep', 'boop', 'foo', 'bar'], [true, true, false, true]); // [ ['beep', 'boop', 'bar'], ['foo'] ]
</code></pre></div><h1 id="_10、bifurcateby"><a href="#_10、bifurcateby" class="header-anchor">#</a> <strong>10、bifurcateBy</strong></h1> <p>此代码段根据谓词函数将值分为两组。 如果谓词函数返回一个真值，则该元素将被放置在第一组中。 否则，它将被放置在第二组中。</p> <p>你可以使用 Array.prototype.reduce() 和 Array.prototype.push() 根据 fn 为每个元素返回的值将元素添加到组中。</p> <div class="language- extra-class"><pre class="language-text"><code>const bifurcateBy = (arr, fn) =&gt;  arr.reduce((acc, val, i) =&gt; (acc[fn(val, i) ? 0 : 1].push(val), acc), [[], []]);
bifurcateBy(['beep', 'boop', 'foo', 'bar'], x =&gt; x[0] === 'b'); // [ ['beep', 'boop', 'bar'], ['foo'] ]
</code></pre></div><h1 id="_11、bottomvisible"><a href="#_11、bottomvisible" class="header-anchor">#</a> <strong>11、bottomVisible</strong></h1> <p>此代码段检查页面底部是否可见。</p> <div class="language- extra-class"><pre class="language-text"><code>const bottomVisible = () =&gt;  document.documentElement.clientHeight + window.scrollY &gt;=  (document.documentElement.scrollHeight || document.documentElement.clientHeight);
bottomVisible(); // true
</code></pre></div><h1 id="_12、bytesize"><a href="#_12、bytesize" class="header-anchor">#</a> <strong>12、byteSize</strong></h1> <p>此代码段以字节为单位返回字符串的长度。</p> <div class="language- extra-class"><pre class="language-text"><code>const byteSize = str =&gt; new Blob([str]).size;
byteSize('😀'); // 4byteSize('Hello World'); // 11
</code></pre></div><h1 id="_13、capitalize"><a href="#_13、capitalize" class="header-anchor">#</a> <strong>13、capitalize</strong></h1> <p>此代码段将字符串的第一个字母大写。</p> <div class="language- extra-class"><pre class="language-text"><code>const capitalize = ([first, ...rest]) =&gt;  first.toUpperCase() + rest.join('');
capitalize('fooBar'); // 'FooBar'capitalize('fooBar', true); // 'FooBar'
</code></pre></div><h1 id="_14、capitalizeeveryword"><a href="#_14、capitalizeeveryword" class="header-anchor">#</a> <strong>14、capitalizeEveryWord</strong></h1> <p>此代码段将给定字符串中每个单词的第一个字母大写。</p> <div class="language- extra-class"><pre class="language-text"><code>const capitalizeEveryWord = str =&gt; str.replace(/\b[az]/g, char =&gt; char.toUpperCase());
capitalizeEveryWord('hello world!'); // 'Hello World!'
</code></pre></div><h1 id="_15、castarray"><a href="#_15、castarray" class="header-anchor">#</a> <strong>15、castArray</strong></h1> <p>此代码段将非数组值转换为数组。</p> <div class="language- extra-class"><pre class="language-text"><code>const castArray = val =&gt; (Array.isArray(val) ? val : [val]);castArray('foo'); // ['foo']castArray([1]); // [1]
</code></pre></div><h1 id="_16、compact"><a href="#_16、compact" class="header-anchor">#</a> <strong>16、compact</strong></h1> <p>此代码段从数组中删除错误值。</p> <div class="language- extra-class"><pre class="language-text"><code>const compact = arr =&gt; arr.filter(Boolean);
compact([0, 1, false, 2, '', 3, 'a', 'e' * 23, NaN, 's', 34]); // [ 1, 2, 3, 'a', 's', 34 ]
</code></pre></div><h1 id="_17、countoccurrences"><a href="#_17、countoccurrences" class="header-anchor">#</a> <strong>17、countOccurrences</strong></h1> <p>此代码段计算数组中某个值的出现次数。</p> <div class="language- extra-class"><pre class="language-text"><code>const countOccurrences = (arr, val) =&gt; arr.reduce((a, v) =&gt; (v === val ? a + 1 : a), 0);countOccurrences([1, 1, 2, 1, 2, 3], 1); // 3
</code></pre></div><h1 id="_18、create-directory"><a href="#_18、create-directory" class="header-anchor">#</a> <strong>18、Create Directory</strong></h1> <p>此代码段用于existsSync()检查目录是否存在，mkdirSync()如果不存在则创建它。</p> <div class="language- extra-class"><pre class="language-text"><code>const fs = require('fs');const createDirIfNotExists = dir =&gt; (!fs.existsSync(dir) ? fs.mkdirSync(dir) : undefined);createDirIfNotExists('test'); // creates the directory 'test', if it doesn't exist
</code></pre></div><h1 id="_19、currenturl"><a href="#_19、currenturl" class="header-anchor">#</a> <strong>19、currentURL</strong></h1> <p>此代码段返回当前URL。</p> <div class="language- extra-class"><pre class="language-text"><code>const currentURL = () =&gt; window.location.href;
currentURL(); // 'https://medium.com/@fatosmorina'
</code></pre></div><h1 id="_20、dayofyear"><a href="#_20、dayofyear" class="header-anchor">#</a> <strong>20、dayOfYear</strong></h1> <p>此代码段从Date 对象中获取一年中的哪一天。</p> <div class="language- extra-class"><pre class="language-text"><code>const dayOfYear = date =&gt;  Math.floor((date  new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
dayOfYear(new Date()); // 272
</code></pre></div><h1 id="_21、decapitalize"><a href="#_21、decapitalize" class="header-anchor">#</a> <strong>21、decapitalize</strong></h1> <p>此代码段将字符串的第一个字母转换为小写。</p> <div class="language- extra-class"><pre class="language-text"><code>const decapitalize = ([first, ...rest]) =&gt;  first.toLowerCase() + rest.join('')
decapitalize('FooBar'); // 'fooBar'decapitalize('FooBar'); // 'fooBar'
</code></pre></div><h1 id="_22、deepflatten"><a href="#_22、deepflatten" class="header-anchor">#</a> <strong>22、deepFlatten</strong></h1> <p>此代码段递归地展平数组。</p> <div class="language- extra-class"><pre class="language-text"><code>const deepFlatten = arr =&gt; [].concat(...arr.map(v =&gt; (Array.isArray(v) ? deepFlatten(v) : v)));
deepFlatten([1, [2], [[3], 4], 5]); // [1,2,3,4,5]
</code></pre></div><h1 id="_23、defaults"><a href="#_23、defaults" class="header-anchor">#</a> <strong>23、defaults</strong></h1> <p>此代码段为对象中未定义的所有属性分配默认值。</p> <div class="language- extra-class"><pre class="language-text"><code>const defaults = (obj, ...defs) =&gt; Object.assign({}, obj, ...defs.reverse(), obj);
defaults({ a: 1 }, { b: 2 }, { b: 6 }, { a: 3 }); // { a: 1, b: 2 }
</code></pre></div><h1 id="_24、defer"><a href="#_24、defer" class="header-anchor">#</a> <strong>24、defer</strong></h1> <p>此代码段会延迟函数的执行，直到清除当前调用堆栈。</p> <div class="language- extra-class"><pre class="language-text"><code>const defer = (fn, ...args) =&gt; setTimeout(fn, 1, ...args);
defer(console.log, 'a'), console.log('b'); // logs 'b' then 'a'
</code></pre></div><h1 id="_25、degreestorads"><a href="#_25、degreestorads" class="header-anchor">#</a> <strong>25、degreesToRads</strong></h1> <p>此代码片段可用于将值从度数转换为弧度。</p> <div class="language- extra-class"><pre class="language-text"><code>const degreesToRads = deg =&gt; (deg * Math.PI) / 180.0;
degreesToRads(90.0); // ~1.5708
</code></pre></div><h1 id="_26、difference"><a href="#_26、difference" class="header-anchor">#</a> <strong>26、difference</strong></h1> <p>此代码段查找两个数组之间的差异。</p> <div class="language- extra-class"><pre class="language-text"><code>const difference = (a, b) =&gt; {  const s = new Set(b);  return a.filter(x =&gt; !s.has(x));};
difference([1, 2, 3], [1, 2, 4]); // [3]
</code></pre></div><h1 id="_27、differenceby"><a href="#_27、differenceby" class="header-anchor">#</a> <strong>27、differenceBy</strong></h1> <p>在将给定函数应用于两个列表的每个元素之后，此方法返回两个数组之间的差异。</p> <div class="language- extra-class"><pre class="language-text"><code>const differenceBy = (a, b, fn) =&gt; {  const s = new Set(b.map(fn));  return a.filter(x =&gt; !s.has(fn(x)));};
differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [1.2]differenceBy([{ x: 2 }, { x: 1 }], [{ x: 1 }], v =&gt; v.x); // [ { x: 2 } ]
</code></pre></div><h1 id="_28、differencewith"><a href="#_28、differencewith" class="header-anchor">#</a> <strong>28、differenceWith</strong></h1> <p>此代码段删除了比较器函数返回的值false。</p> <div class="language- extra-class"><pre class="language-text"><code>const differenceWith = (arr, val, comp) =&gt; arr.filter(a =&gt; val.findIndex(b =&gt; comp(a, b)) === 1);
differenceWith([1, 1.2, 1.5, 3, 0], [1.9, 3, 0], (a, b) =&gt; Math.round(a) === Math.round(b)); // [1, 1.2]
</code></pre></div><h1 id="_29、digitize"><a href="#_29、digitize" class="header-anchor">#</a> <strong>29、digitize</strong></h1> <p>此代码段获取一个数字作为输入并返回其数字数组。</p> <div class="language- extra-class"><pre class="language-text"><code>const digitize = n =&gt; [...`${n}`].map(i =&gt; parseInt(i));
digitize(431); // [4, 3, 1]
</code></pre></div><h1 id="_30、distance"><a href="#_30、distance" class="header-anchor">#</a> <strong>30、distance</strong></h1> <p>此代码段通过计算距离返回两点之间的距离。</p> <div class="language- extra-class"><pre class="language-text"><code>const distance = (x0, y0, x1, y1) =&gt; Math.hypot(x1  x0, y1  y0);
distance(1, 1, 2, 3); // 2.23606797749979
</code></pre></div><h1 id="_31、drop-elements"><a href="#_31、drop-elements" class="header-anchor">#</a> <strong>31、drop Elements</strong></h1> <p>此代码段返回一个从左侧删除了 n 个元素的新数组。</p> <div class="language- extra-class"><pre class="language-text"><code>const drop = (arr, n = 1) =&gt; arr.slice(n);
drop([1, 2, 3]); // [2,3]drop([1, 2, 3], 2); // [3]drop([1, 2, 3], 42); // []
</code></pre></div><h1 id="_32、dropright"><a href="#_32、dropright" class="header-anchor">#</a> <strong>32、dropRight</strong></h1> <p>此代码段返回一个从右侧删除了 n 个元素的新数组。</p> <div class="language- extra-class"><pre class="language-text"><code>const dropRight = (arr, n = 1) =&gt; arr.slice(0, n);
dropRight([1, 2, 3]); // [1,2]dropRight([1, 2, 3], 2); // [1]dropRight([1, 2, 3], 42); // []
</code></pre></div><h1 id="_33、droprightwhile"><a href="#_33、droprightwhile" class="header-anchor">#</a> <strong>33、dropRightWhile</strong></h1> <p>此代码段从数组的右侧删除元素，直到传递的函数返回 true。</p> <div class="language- extra-class"><pre class="language-text"><code>const dropRightWhile = (arr, func) =&gt; {  while (arr.length &gt; 0 &amp;&amp; !func(arr[arr.length  1])) arr = arr.slice(0, 1);  return arr;};
dropRightWhile([1, 2, 3, 4], n =&gt; n &lt; 3); // [1, 2]
</code></pre></div><h1 id="_34、dropwhile"><a href="#_34、dropwhile" class="header-anchor">#</a> <strong>34、dropWhile</strong></h1> <p>此代码段从数组中删除元素，直到传递的函数返回true。</p> <div class="language- extra-class"><pre class="language-text"><code>const dropWhile = (arr, func) =&gt; {  while (arr.length &gt; 0 &amp;&amp; !func(arr[0])) arr = arr.slice(1);  return arr;};
dropWhile([1, 2, 3, 4], n =&gt; n &gt;= 3); // [3,4]
</code></pre></div><h1 id="_35、elementcontains"><a href="#_35、elementcontains" class="header-anchor">#</a> <strong>35、elementContains</strong></h1> <p>此代码段检查父元素是否包含子元素。</p> <div class="language- extra-class"><pre class="language-text"><code>const elementContains = (parent, child) =&gt; parent !== child &amp;&amp; parent.contains(child);
elementContains(document.querySelector('head'), document.querySelector('title')); // trueelementContains(document.querySelector('body'), document.querySelector('body')); // false
</code></pre></div><h1 id="_36、过滤重复元素"><a href="#_36、过滤重复元素" class="header-anchor">#</a> <strong>36、过滤重复元素</strong></h1> <p>此代码段删除数组中的重复值。</p> <div class="language- extra-class"><pre class="language-text"><code>const filterNonUnique = arr =&gt; [ …new Set(arr)];filterNonUnique([1, 2, 2, 3, 4, 4, 5]); // [1, 2, 3, 4, 5]
</code></pre></div><h1 id="_37、findkey"><a href="#_37、findkey" class="header-anchor">#</a> <strong>37、findKey</strong></h1> <p>此代码段返回满足给定函数的第一个键值。</p> <div class="language- extra-class"><pre class="language-text"><code>const findKey = (obj, fn) =&gt; Object.keys(obj).find(key =&gt; fn(obj[key], key, obj));
findKey(  {    barney: { age: 36, active: true },    fred: { age: 40, active: false },    pebbles: { age: 1, active: true }  },  o =&gt; o['active']); // 'barney'
</code></pre></div><h1 id="_38、findlast"><a href="#_38、findlast" class="header-anchor">#</a> <strong>38、findLast</strong></h1> <p>此代码段返回给定函数返回真值的最后一个元素。</p> <div class="language- extra-class"><pre class="language-text"><code>const findLast = (arr, fn) =&gt; arr.filter(fn).pop();
findLast([1, 2, 3, 4], n =&gt; n % 2 === 1); // 3
</code></pre></div><h1 id="_39、flatten"><a href="#_39、flatten" class="header-anchor">#</a> <strong>39、flatten</strong></h1> <p>此代码段使用递归将数组展平到指定的深度。</p> <div class="language- extra-class"><pre class="language-text"><code>const flatten = (arr, depth = 1) =&gt;  arr.reduce((a, v) =&gt; a.concat(depth &gt; 1 &amp;&amp; Array.isArray(v) ? flatten(v, depth  1) : v), []);
flatten([1, [2], 3, 4]); // [1, 2, 3, 4]flatten([1, [2, [3, [4, 5], 6], 7], 8], 2); // [1, 2, 3, [4, 5], 6, 7, 8]
</code></pre></div><h1 id="_40、foreachright"><a href="#_40、foreachright" class="header-anchor">#</a> <strong>40、forEachRight</strong></h1> <p>此代码段从数组的最后一个元素开始，为数组的每个元素执行一个函数。</p> <div class="language- extra-class"><pre class="language-text"><code>const forEachRight = (arr, callback) =&gt;  arr    .slice(0)    .reverse()    .forEach(callback);
forEachRight([1, 2, 3, 4], val =&gt; console.log(val)); // '4', '3', '2', '1'
</code></pre></div><h1 id="_41、forown"><a href="#_41、forown" class="header-anchor">#</a> <strong>41、forOwn</strong></h1> <p>此代码段迭代对象的每个属性，并分别为每个属性迭代一个回调。</p> <div class="language- extra-class"><pre class="language-text"><code>const forOwn = (obj, fn) =&gt; Object.keys(obj).forEach(key =&gt; fn(obj[key], key, obj));forOwn({ foo: 'bar', a: 1 }, v =&gt; console.log(v)); // 'bar', 1
</code></pre></div><h1 id="_42、functionname"><a href="#_42、functionname" class="header-anchor">#</a> <strong>42、functionName</strong></h1> <p>此代码段将函数的名称打印到控制台中。</p> <div class="language- extra-class"><pre class="language-text"><code>const functionName = fn =&gt; (console.debug(fn.name), fn);functionName(Math.max); // max (logged in debug channel of console)
</code></pre></div><h1 id="_43、从日期获取时间"><a href="#_43、从日期获取时间" class="header-anchor">#</a> <strong>43、从日期获取时间</strong></h1> <p>此代码段可用于以Date 字符串形式从对象中获取时间。</p> <div class="language- extra-class"><pre class="language-text"><code>const getColonTimeFromDate = date =&gt; date.toTimeString().slice(0, 8);
getColonTimeFromDate(new Date()); // &quot;08:38:00&quot;
</code></pre></div><h1 id="_44、获取日期之间的天数"><a href="#_44、获取日期之间的天数" class="header-anchor">#</a> <strong>44、获取日期之间的天数</strong></h1> <p>此代码段可用于查找两个日期之间的天数差异。</p> <div class="language- extra-class"><pre class="language-text"><code>const getDaysDiffBetweenDates = (dateInitial, dateFinal) =&gt;  (dateFinal  dateInitial) / (1000 * 3600 * 24);
getDaysDiffBetweenDates(new Date('20190113'), new Date('20190115')); // 2
</code></pre></div><h1 id="_45、getstyle"><a href="#_45、getstyle" class="header-anchor">#</a> <strong>45、getStyle</strong></h1> <p>此代码段可用于获取特定元素的 CSS 规则值。</p> <div class="language- extra-class"><pre class="language-text"><code>const getStyle = (el, ruleName) =&gt; getComputedStyle(el)[ruleName];
getStyle(document.querySelector('p'), 'fontsize'); // '16px'
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/8/2024, 3:01:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript/1-重要类型/字符串-array.html" class="prev">
        字符串转换为字符数组的方法
      </a></span> <span class="next"><a href="/javascript/2-代码片段/代码片段-3.html">
        127个超级实用的JavaScript 代码片段，你千万要收藏好（中）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.19fb38d9.js" defer></script><script src="/assets/js/2.57da4f88.js" defer></script><script src="/assets/js/1.a76cc220.js" defer></script><script src="/assets/js/51.5f9843fd.js" defer></script>
  </body>
</html>
